<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>章节定义</title>
</head>
<body>
<div class="breadcrumbs ace-save-state" id="breadcrumbs">
    <ul class="breadcrumb">
        <li>
            <i class="ace-icon fa fa-home home-icon"></i>
            Home
        </li>
        <li>
            课程管理
        </li>
        <li>
            章节定义
        </li>
    </ul><!-- /.breadcrumb -->
</div>
<div class="page-content">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">课程选择</h3>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-xs-6">
                    <div class="pull-left">
                        <span style="height: 28px;line-height: 28px;font-family:'FontAwesome';font-size: 14px;color: #337ab7">课程大类：</span>
                        <select id="course" class="form-control">
                        </select>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class="pull-left">
                        <span style="height: 28px;line-height: 28px;font-family:'FontAwesome';font-size: 14px;color: #337ab7">课程小类：</span>
                        <select id="subCourse" class="form-control" >
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-6">
            <div class="widget-box widget-color-green2">
                <div class="widget-header">
                    <h4 class="widget-title lighter smaller">
                        <span class="smaller-80">章节树</span>
                    </h4>
                </div>

                <div class="widget-body">
                    <div class="widget-main padding-8">
                        <ul id="chapter_tree"></ul>
                    </div>
                </div>
            </div>
        </div>
        </div>
        <div class="col-xs-6"></div>
    </div>
</div>
</body>
</html>
<script type="text/javascript">
    var data1 = [
        { id: -1, text: '--选择课程大类--' },
        { id: 0, text: '2017江苏省会计从业资格考试' },
        { id: 1, text: '2017浙江省会计从业资格考试' },
        { id: 2, text: '2017上海会计从业资格考试' },
        { id: 3, text: '2017全国会计从业资格考试' },
        { id: 4, text: '2017四川省会计从业资格考试' },
        { id: 1, text: '2017浙江省会计从业资格考试' },
        { id: 2, text: '2017上海会计从业资格考试' },
        { id: 3, text: '2017全国会计从业资格考试' },
        { id: 4, text: '2017四川省会计从业资格考试' },
        { id: 1, text: '2017浙江省会计从业资格考试' },
        { id: 2, text: '2017上海会计从业资格考试' },
        { id: 3, text: '2017全国会计从业资格考试' },
        { id: 4, text: '2017四川省会计从业资格考试' },
        { id: 1, text: '2017浙江省会计从业资格考试' },
        { id: 2, text: '2017上海会计从业资格考试' },
        { id: 3, text: '2017全国会计从业资格考试' },
        { id: 4, text: '2017四川省会计从业资格考试' },
        { id: 1, text: '2017浙江省会计从业资格考试' },
        { id: 2, text: '2017上海会计从业资格考试' },
        { id: 3, text: '2017全国会计从业资格考试' },
        { id: 4, text: '2017四川省会计从业资格考试' },
        { id: 1, text: '2017浙江省会计从业资格考试' }];
    var data2 = [
        { id: -1, text: '--选择课程小类--' },
        { id: 1, text: '[2017会计基础]' },
        { id: 2, text: '[2017会计基础]' },
        { id: 3, text: '[2017会计基础]' }
    ];
    $('#course').select2({
        data: data1,
        tags: "true",
        placeholder: "Select a state", //默认提示语
        theme: "classic"
    });

    $('#subCourse').select2({
        data: data2,
        theme: "classic"
    });

        var sampleData = initiateDemoData();
        $('#chapter_tree').ace_tree({
            dataSource: sampleData['dataSource'],
            loadingHTML:'<div class="tree-loading"><i class="ace-icon fa fa-refresh fa-spin blue"></i></div>',
            'open-icon' : 'ace-icon fa fa-folder-open',
            'close-icon' : 'ace-icon fa fa-folder',
            'itemSelect' : true,
            'folderSelect': true,
            'multiSelect': false,
            'selected-icon' : null,
            'unselected-icon' : null,
            'folder-open-icon' : 'ace-icon tree-plus',
            'folder-close-icon' : 'ace-icon tree-minus'
        });

        function initiateDemoData(){
            console.log("initiateDemoData")
            var tree_data = {
                'pictures' : {text: 'Pictures', type: 'folder', 'icon-class':'red'}	,
                'music' : {text: 'Music', type: 'folder', 'icon-class':'orange'}	,
                'video' : {text: 'Video', type: 'folder', 'icon-class':'blue'}	,
                'documents' : {text: 'Documents', type: 'folder', 'icon-class':'green'}	,
                'backup' : {text: 'Backup', type: 'folder'}	,
                'readme' : {text: '<i class="ace-icon fa fa-file-text grey"></i> ReadMe.txt', type: 'item'},
                'manual' : {text: '<i class="ace-icon fa fa-book blue"></i> Manual.html', type: 'item'}
            }
            tree_data['music']['additionalParameters'] = {
                'children' : [
                    {text: '<span onclick="a()"> <i class="ace-icon fa fa-music blue"></i> song1.ogg</span>', type: 'item'},
                    {text: '<i class="ace-icon fa fa-music blue" onclick="a()">&nbsp;song2.ogg</i>' , type: 'item'},
                    {text: '<i class="ace-icon fa fa-music blue"></i> song3.ogg', type: 'item'},
                    {text: '<i class="ace-icon fa fa-music blue"></i> song4.ogg', type: 'item'},
                    {text: '<i class="ace-icon fa fa-music blue"></i> song5.ogg', type: 'item'}
                ]
            }
            tree_data['video']['additionalParameters'] = {
                'children' : [
                    {text: '<i class="ace-icon fa fa-film blue"></i> movie1.avi', type: 'item'},
                    {text: '<i class="ace-icon fa fa-film blue"></i> movie2.avi', type: 'item'},
                    {text: '<i class="ace-icon fa fa-film blue"></i> movie3.avi', type: 'item'},
                    {text: '<i class="ace-icon fa fa-film blue"></i> movie4.avi', type: 'item'},
                    {text: '<i class="ace-icon fa fa-film blue"></i> movie5.avi', type: 'item'}
                ]
            }
            tree_data['pictures']['additionalParameters'] = {
                'children' : {
                    'wallpapers' : {text: 'Wallpapers', type: 'folder', 'icon-class':'pink'},
                    'camera' : {text: 'Camera', type: 'folder', 'icon-class':'pink'}
                }
            }
            tree_data['pictures']['additionalParameters']['children']['wallpapers']['additionalParameters'] = {
                'children' : [
                    {text: '<i class="ace-icon fa fa-picture-o green"></i> wallpaper1.jpg', type: 'item'},
                    {text: '<i class="ace-icon fa fa-picture-o green"></i> wallpaper2.jpg', type: 'item'},
                    {text: '<i class="ace-icon fa fa-picture-o green"></i> wallpaper3.jpg', type: 'item'},
                    {text: '<i class="ace-icon fa fa-picture-o green"></i> wallpaper4.jpg', type: 'item'}
                ]
            }
            tree_data['pictures']['additionalParameters']['children']['camera']['additionalParameters'] = {
                'children' : [
                    {text: '<i class="ace-icon fa fa-picture-o green"></i> photo1.jpg', type: 'item'},
                    {text: '<i class="ace-icon fa fa-picture-o green"></i> photo2.jpg', type: 'item'},
                    {text: '<i class="ace-icon fa fa-picture-o green"></i> photo3.jpg', type: 'item'},
                    {text: '<i class="ace-icon fa fa-picture-o green"></i> photo4.jpg', type: 'item'},
                    {text: '<i class="ace-icon fa fa-picture-o green"></i> photo5.jpg', type: 'item'},
                    {text: '<i class="ace-icon fa fa-picture-o green"></i> photo6.jpg', type: 'item'}
                ]
            }


            tree_data['documents']['additionalParameters'] = {
                'children' : [
                    {text: '<i class="ace-icon fa fa-file-text red"></i> document1.pdf', type: 'item'},
                    {text: '<i class="ace-icon fa fa-file-text grey"></i> document2.doc', type: 'item'},
                    {text: '<i class="ace-icon fa fa-file-text grey"></i> document3.doc', type: 'item'},
                    {text: '<i class="ace-icon fa fa-file-text red"></i> document4.pdf', type: 'item'},
                    {text: '<i class="ace-icon fa fa-file-text grey"></i> document5.doc', type: 'item'}
                ]
            }

            tree_data['backup']['additionalParameters'] = {
                'children' : [
                    {text: '<i class="ace-icon fa fa-archive brown"></i> backup1.zip', type: 'item'},
                    {text: '<i class="ace-icon fa fa-archive brown"></i> backup2.zip', type: 'item'},
                    {text: '<i class="ace-icon fa fa-archive brown"></i> backup3.zip', type: 'item'},
                    {text: '<i class="ace-icon fa fa-archive brown"></i> backup4.zip', type: 'item'}
                ]
            }
            var dataSource = function(options, callback){
                var $data = null
                if(!("text" in options) && !("type" in options)){
                    $data = tree_data;//the root tree
                    callback({ data: $data });
                    return;
                }
                else if("type" in options && options.type == "folder") {
                    if("additionalParameters" in options && "children" in options.additionalParameters)
                        $data = options.additionalParameters.children || {};
                    else $data = {}//no data
                }

                if($data != null)//this setTimeout is only for mimicking some random delay
                    setTimeout(function(){callback({ data: $data });} , parseInt(Math.random() * 500) + 200);
            }
            console.log(dataSource)
            return {'dataSource' : dataSource}
        }

</script>
